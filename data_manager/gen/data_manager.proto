syntax = "proto3";

// The data manager service definition.
service DataManager {
    // Add a task
    rpc AddTask (Task) returns (Reply) {
    }

    // Delete/Stop a task
    rpc DeleteTask (Task) returns (Reply) {
    }

    // Get task information
    rpc QueryTask (Task) returns (Reply) {
    }

    // Update task information
    rpc UpdateTask (Task) returns (Reply) {
    }

    // Add task's log
    rpc AddCustomLog (TaskLog) returns (Reply) {
    }
}

message AddTaskReq {
    Task task = 1;
}

message DelTaskReq {
    Task task = 1;
}

message QueryTaskReq {
    Task task = 1;
}

message UpdateTaskReq {
    Task task = 1;
}

message AddCustomLogReq {
    TaskLog task_log = 1;
}

message TaskLog {
    int64 task_id = 1;
    string log = 2;
}

message Task {
    int64 task_id = 1;
    int64 user_id = 2;
    string runner = 3;
    string file = 4;
}

message Reply {
    int32 code = 1;
    string message = 2;
}

//python -m grpc_tools.protoc -I. --python_out=. --grpc_python_out=. ./protos/data_manager.proto